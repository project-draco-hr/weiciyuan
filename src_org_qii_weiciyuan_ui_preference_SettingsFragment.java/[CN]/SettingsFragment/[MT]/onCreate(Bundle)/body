{
  super.onCreate(savedInstanceState);
  addPreferencesFromResource(R.xml.pref);
  getPreferenceScreen().getSharedPreferences().registerOnSharedPreferenceChangeListener(this);
  clear_cache=findPreference(SettingActivity.CLEAR_CACHE);
  clear_cache.setOnPreferenceClickListener(new Preference.OnPreferenceClickListener(){
    @Override public boolean onPreferenceClick(    Preference preference){
      FileManager.deleteCache();
      return true;
    }
  }
);
  task=new CalcCacheSize();
  task.executeOnExecutor(MyAsyncTask.THREAD_POOL_EXECUTOR);
  findPreference(SettingActivity.OFFICIAL_WEIBO).setOnPreferenceClickListener(new Preference.OnPreferenceClickListener(){
    @Override public boolean onPreferenceClick(    Preference preference){
      UserBean bean=new UserBean();
      bean.setScreen_name(getString(R.string.app_name));
      String token=GlobalContext.getInstance().getSpecialToken();
      Intent intent=new Intent(getActivity(),UserInfoActivity.class);
      intent.putExtra("token",token);
      intent.putExtra("user",bean);
      startActivity(intent);
      return true;
    }
  }
);
}
