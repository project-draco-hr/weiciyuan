{
  while (true) {
    DownloadWorker downloadWorker=null;
    String largePath=FileManager.getFilePathFromUrl(url,FileLocationMethod.picture_large);
    downloadWorker=TaskCache.downloadTasks.get(url);
    boolean localFileExist=new File(largePath).exists();
    if (downloadWorker == null) {
      if (localFileExist) {
        return true;
      }
      DownloadWorker newWorker=new DownloadWorker(url,FileLocationMethod.picture_large);
synchronized (backgroundWifiDownloadPicturesWorkLock) {
        downloadWorker=TaskCache.downloadTasks.putIfAbsent(url,newWorker);
      }
      if (downloadWorker == null) {
        downloadWorker=newWorker;
        downloadWorker.executeOnExecutor(MyAsyncTask.DOWNLOAD_THREAD_POOL_EXECUTOR);
      }
    }
    try {
      downloadWorker.addDownloadListener(downloadListener);
      return downloadWorker.get(30,TimeUnit.SECONDS);
    }
 catch (    InterruptedException e) {
      Thread.currentThread().interrupt();
      Utility.printStackTrace(e);
      return false;
    }
catch (    ExecutionException e) {
      Utility.printStackTrace(e);
      return false;
    }
catch (    TimeoutException e) {
      Utility.printStackTrace(e);
      return false;
    }
catch (    CancellationException e) {
      removeDownloadTask(url,downloadWorker);
    }
  }
}
