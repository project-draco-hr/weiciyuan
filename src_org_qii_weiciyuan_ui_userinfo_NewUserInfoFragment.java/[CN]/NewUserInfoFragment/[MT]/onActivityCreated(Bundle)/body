{
switch (getCurrentState(savedInstanceState)) {
case FIRST_TIME_START:
    setValue();
  if (isMyself() && isOpenedFromMainPage()) {
    readDBCache();
  }
 else {
    Utility.runUIActionDelayed(new Runnable(){
      @Override public void run(){
        if (getActivity() == null) {
          return;
        }
        fetchLastestUserInfoFromServer();
        loadNewMsg();
        fetchTopicInfoFromServer();
      }
    }
,400);
  }
break;
case SCREEN_ROTATE:
refreshLayout(getList());
setValue();
if (bean.getSize() > 0) {
moreFooter.setVisibility(View.VISIBLE);
getListView().removeFooterView(progressFooter);
}
break;
case ACTIVITY_DESTROY_AND_CREATE:
getList().replaceData((MessageListBean)savedInstanceState.getParcelable("bean"));
userBean=(UserBean)savedInstanceState.getParcelable("userBean");
token=savedInstanceState.getString("token");
getAdapter().notifyDataSetChanged();
refreshLayout(getList());
setValue();
break;
}
super.onActivityCreated(savedInstanceState);
if ((getActivity() instanceof MainTimeLineActivity) && (((MainTimeLineActivity)getActivity()).getMenuFragment()).getCurrentIndex() == LeftMenuFragment.PROFILE_INDEX) {
buildActionBarAndViewPagerTitles();
}
}
