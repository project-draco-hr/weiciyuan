{
  getActivity().getActionBar().setDisplayShowTitleEnabled(false);
  getActivity().getActionBar().setNavigationMode(ActionBar.NAVIGATION_MODE_LIST);
  List<GroupBean> list=new ArrayList<GroupBean>();
  if (GlobalContext.getInstance().getGroup() != null) {
    list=GlobalContext.getInstance().getGroup().getLists();
  }
 else {
    list=new ArrayList<GroupBean>();
  }
  List<String> name=new ArrayList<String>();
  int index=0;
  if (currentGroupId.equals("0")) {
    index=0;
  }
 else   if (currentGroupId.equals("1")) {
    index=1;
  }
  name.add(getString(R.string.all_people));
  name.add(getString(R.string.bilateral));
  for (  GroupBean b : list) {
    name.add(b.getName());
  }
  for (int i=0; i < list.size(); i++) {
    if (list.get(i).getIdstr().equals(currentGroupId)) {
      index=i + 2;
      break;
    }
  }
  final String[] valueArray=name.toArray(new String[0]);
  navAdapter=new FriendsTimeLineListNavAdapter(getActivity(),valueArray);
  final List<GroupBean> finalList=list;
  getActivity().getActionBar().setListNavigationCallbacks(navAdapter,new ActionBar.OnNavigationListener(){
    @Override public boolean onNavigationItemSelected(    int which,    long itemId){
      if (!Utility.isTaskStopped(dbTask)) {
        return true;
      }
      String selectedItemId;
      if (which == 0) {
        selectedItemId="0";
      }
 else       if (which == 1) {
        selectedItemId="1";
      }
 else {
        selectedItemId=finalList.get(which - 2).getIdstr();
      }
      if (!selectedItemId.equals(currentGroupId)) {
        positionCache.put(currentGroupId,Utility.getCurrentPositionFromListView(getListView()));
        setSelected(selectedItemId);
        switchGroup();
      }
      return true;
    }
  }
);
  getActivity().getActionBar().setSelectedNavigationItem(index);
}
