{
  getActivity().getActionBar().setDisplayShowTitleEnabled(false);
  getActivity().getActionBar().setNavigationMode(ActionBar.NAVIGATION_MODE_LIST);
  List<GroupBean> list=new ArrayList<GroupBean>();
  if (GlobalContext.getInstance().getGroup() != null) {
    list=GlobalContext.getInstance().getGroup().getLists();
  }
 else {
    list=new ArrayList<GroupBean>();
  }
  List<String> name=new ArrayList<String>();
  name.add(getString(R.string.all_people));
  name.add(getString(R.string.bilateral));
  for (  GroupBean b : list) {
    name.add(b.getName());
  }
  final String[] valueArray=name.toArray(new String[0]);
  BaseAdapter adapter=new BaseAdapter(){
    @Override public int getCount(){
      return valueArray.length;
    }
    @Override public Object getItem(    int position){
      return valueArray[position];
    }
    @Override public long getItemId(    int position){
      return 0;
    }
    @Override public View getView(    int position,    View convertView,    ViewGroup parent){
      LayoutInflater inflater=getActivity().getLayoutInflater();
      View view=inflater.inflate(R.layout.spinner_selector_text_view,parent,false);
      if (position != 0) {
        ((TextView)view).setText(valueArray[position]);
      }
 else {
        ((TextView)view).setText(GlobalContext.getInstance().getCurrentAccountName());
      }
      return view;
    }
    @Override public View getDropDownView(    int position,    View convertView,    ViewGroup parent){
      LayoutInflater inflater=getActivity().getLayoutInflater();
      View view=inflater.inflate(android.R.layout.simple_spinner_dropdown_item,parent,false);
      ((CheckedTextView)view).setText(valueArray[position]);
      return view;
    }
  }
;
  final List<GroupBean> finalList=list;
  getActivity().getActionBar().setListNavigationCallbacks(adapter,new ActionBar.OnNavigationListener(){
    @Override public boolean onNavigationItemSelected(    int which,    long itemId){
      String selectedItemId;
      if (which == 0) {
        selectedItemId="0";
      }
 else       if (which == 1) {
        selectedItemId="1";
      }
 else {
        selectedItemId=finalList.get(which - 2).getIdstr();
      }
      if (!selectedItemId.equals(currentGroupId)) {
        setSelected(selectedItemId);
        switchGroup();
      }
      return false;
    }
  }
);
}
