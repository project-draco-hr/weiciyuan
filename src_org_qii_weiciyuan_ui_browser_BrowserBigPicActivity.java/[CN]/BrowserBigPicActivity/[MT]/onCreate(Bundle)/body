{
  super.onCreate(savedInstanceState);
  getWindow().setBackgroundDrawable(new ColorDrawable(0));
  setContentView(R.layout.browserbigpicactivity_layout);
  WindowManager.LayoutParams params=getWindow().getAttributes();
  params.width=ViewGroup.LayoutParams.MATCH_PARENT;
  getWindow().setAttributes((android.view.WindowManager.LayoutParams)params);
  layout=new Layout();
  layout.refresh=(ImageButton)findViewById(R.id.ib_refresh);
  layout.copy=(ImageButton)findViewById(R.id.ib_copy);
  layout.share=(ImageButton)findViewById(R.id.ib_share);
  layout.save=(ImageButton)findViewById(R.id.ib_save);
  layout.hd=(ImageButton)findViewById(R.id.ib_hd);
  layout.pb=(CircleProgressView)findViewById(R.id.pb);
  layout.webView=(WebView)findViewById(R.id.iv);
  layout.webView.setBackgroundColor(getResources().getColor(R.color.transparent));
  layout.webView.getSettings().setJavaScriptEnabled(true);
  layout.webView.getSettings().setUseWideViewPort(true);
  layout.webView.getSettings().setLoadWithOverviewMode(true);
  layout.webView.getSettings().setBuiltInZoomControls(true);
  layout.webView.getSettings().setDisplayZoomControls(false);
  layout.webView.setVerticalScrollBarEnabled(false);
  layout.webView.setHorizontalScrollBarEnabled(false);
  layout.webView.setOnTouchListener(new View.OnTouchListener(){
    boolean mPressed;
    boolean mClose;
    CheckForSinglePress mPendingCheckForSinglePress=new CheckForSinglePress();
    long lastTime=0;
    float[] location=new float[2];
    @Override public boolean onTouch(    View v,    MotionEvent event){
switch (event.getActionMasked()) {
case MotionEvent.ACTION_DOWN:
        mPressed=true;
      if (System.currentTimeMillis() - lastTime > ViewConfiguration.getDoubleTapTimeout() + 100) {
        mClose=true;
        new Handler().postDelayed(mPendingCheckForSinglePress,ViewConfiguration.getDoubleTapTimeout() + 100);
      }
 else {
        mClose=false;
      }
    lastTime=System.currentTimeMillis();
  location[0]=event.getRawX();
location[1]=event.getRawY();
break;
case MotionEvent.ACTION_UP:
mPressed=false;
break;
case MotionEvent.ACTION_CANCEL:
mPressed=false;
break;
case MotionEvent.ACTION_MOVE:
float x=event.getRawX();
float y=event.getRawY();
if (Math.abs(location[0] - x) > 5.0f && Math.abs(location[1] - y) > 5.0f) {
mClose=false;
}
break;
}
return false;
}
class CheckForSinglePress implements Runnable {
public void run(){
if (!mPressed && mClose) finish();
}
}
}
);
msg=(MessageBean)getIntent().getSerializableExtra("msg");
if (Utility.isTaskStopped(task)) {
task=new PicSimpleBitmapWorkerTask(hd);
task.executeOnExecutor(MyAsyncTask.THREAD_POOL_EXECUTOR);
}
initOnClickListener();
String largePath=FileManager.getFilePathFromUrl(msg.getOriginal_pic(),FileLocationMethod.picture_large);
if (new File(largePath).exists()) {
layout.hd.setVisibility(View.GONE);
}
}
