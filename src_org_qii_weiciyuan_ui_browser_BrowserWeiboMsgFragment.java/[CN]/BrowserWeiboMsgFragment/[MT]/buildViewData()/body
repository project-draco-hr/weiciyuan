{
  if (msg.getUser() != null) {
    layout.username.setText(msg.getUser().getScreen_name());
    ((AbstractAppActivity)getActivity()).getBitmapDownloader().downloadAvatar(layout.avatar,msg.getUser());
  }
  layout.content.setText(msg.getText());
  ListViewTool.addLinks(layout.content);
  layout.time.setText(msg.getTimeInFormat());
  if (msg.getGeo() != null) {
    if (Utility.isTaskStopped(geoTask)) {
      geoTask=new GetGoogleLocationInfoTask(getActivity(),msg.getGeo(),layout.mapView,layout.location);
      geoTask.executeOnExecutor(MyAsyncTask.THREAD_POOL_EXECUTOR);
    }
  }
  if (!TextUtils.isEmpty(msg.getSource())) {
    layout.source.setText(Html.fromHtml(msg.getSource()).toString());
  }
  if (!TextUtils.isEmpty(msg.getBmiddle_pic()) && msg.getRetweeted_status() == null) {
    if (Utility.isTaskStopped(picTask)) {
      layout.pic_layout.setVisibility(View.VISIBLE);
      layout.content_pic_pb.setVisibility(View.VISIBLE);
      handler.postDelayed(new Runnable(){
        @Override public void run(){
          picTask=new MsgDetailPicTask(layout.content_pic,FileLocationMethod.picture_bmiddle,layout.content_pic_pb);
          picTask.executeOnExecutor(MyAsyncTask.THREAD_POOL_EXECUTOR,msg);
        }
      }
,1000);
    }
  }
  MessageBean repostMsg=msg.getRetweeted_status();
  if (repostMsg != null) {
    layout.content_pic.setVisibility(View.GONE);
    layout.content_pic_pb.setVisibility(View.GONE);
    layout.pic_layout.setVisibility(View.GONE);
    layout.repost_layout.setVisibility(View.VISIBLE);
    layout.recontent.setVisibility(View.VISIBLE);
    if (repostMsg.getUser() != null) {
      layout.recontent.setText("@" + repostMsg.getUser().getScreen_name() + "???"+ repostMsg.getText());
      ListViewTool.addLinks(layout.recontent);
      buildRepostCount();
    }
 else {
      layout.recontent.setText(repostMsg.getText());
      ListViewTool.addLinks(layout.recontent);
    }
    if (!TextUtils.isEmpty(repostMsg.getBmiddle_pic())) {
      layout.repost_pic_layout.setVisibility(View.VISIBLE);
      layout.repost_pic.setVisibility(View.VISIBLE);
      layout.repost_pic_pb.setVisibility(View.VISIBLE);
      if (Utility.isTaskStopped(picTask)) {
        handler.postDelayed(new Runnable(){
          @Override public void run(){
            picTask=new MsgDetailPicTask(layout.repost_pic,FileLocationMethod.picture_bmiddle,layout.repost_pic_pb);
            picTask.executeOnExecutor(MyAsyncTask.THREAD_POOL_EXECUTOR,msg.getRetweeted_status());
          }
        }
,1000);
      }
    }
  }
  getActivity().getActionBar().getTabAt(1).setText(getString(R.string.comments) + "(" + msg.getComments_count()+ ")");
  getActivity().getActionBar().getTabAt(2).setText(getString(R.string.repost) + "(" + msg.getReposts_count()+ ")");
}
