{
  View view=inflater.inflate(R.layout.browserweibomsgactivity_layout,container,false);
  username=(TextView)view.findViewById(R.id.username);
  content=(TextView)view.findViewById(R.id.content);
  recontent=(TextView)view.findViewById(R.id.repost_content);
  time=(TextView)view.findViewById(R.id.time);
  location=(TextView)view.findViewById(R.id.location);
  source=(TextView)view.findViewById(R.id.source);
  mapView=(MapView)view.findViewById(R.id.location_mv);
  mapView.onCreate(savedInstanceState);
  comment_count=(TextView)view.findViewById(R.id.comment_count);
  repost_count=(TextView)view.findViewById(R.id.repost_count);
  count_layout=(LinearLayout)view.findViewById(R.id.count_layout);
  location.setOnClickListener(new View.OnClickListener(){
    @Override public void onClick(    View v){
      if (Utility.isGooglePlaySafe(getActivity())) {
        GeoBean bean=msg.getGeo();
        Intent intent=new Intent(getActivity(),AppMapActivity.class);
        intent.putExtra("lat",bean.getLat());
        intent.putExtra("lon",bean.getLon());
        if (!String.valueOf(bean.getLat() + "," + bean.getLon()).equals(location.getText()))         intent.putExtra("locationStr",location.getText());
        startActivity(intent);
      }
 else {
        GeoBean bean=msg.getGeo();
        String geoUriString="geo:" + bean.getLat() + ","+ bean.getLon()+ "?q="+ location.getText();
        Uri geoUri=Uri.parse(geoUriString);
        Intent mapCall=new Intent(Intent.ACTION_VIEW,geoUri);
        PackageManager packageManager=getActivity().getPackageManager();
        List<ResolveInfo> activities=packageManager.queryIntentActivities(mapCall,0);
        boolean isIntentSafe=activities.size() > 0;
        if (isIntentSafe) {
          startActivity(mapCall);
        }
      }
    }
  }
);
  avatar=(ImageView)view.findViewById(R.id.avatar);
  content_pic=(ImageView)view.findViewById(R.id.content_pic);
  repost_pic=(ImageView)view.findViewById(R.id.repost_content_pic);
  content_pic_pb=(ProgressBar)view.findViewById(R.id.content_pic_pb);
  repost_pic_pb=(ProgressBar)view.findViewById(R.id.repost_content_pic_pb);
  view.findViewById(R.id.first).setOnClickListener(new View.OnClickListener(){
    @Override public void onClick(    View v){
      Intent intent=new Intent(getActivity(),UserInfoActivity.class);
      intent.putExtra("token",GlobalContext.getInstance().getSpecialToken());
      intent.putExtra("user",msg.getUser());
      startActivity(intent);
    }
  }
);
  content_pic.setOnClickListener(picOnClickListener);
  repost_pic.setOnClickListener(picOnClickListener);
  repost_layout=(LinearLayout)view.findViewById(R.id.repost_layout);
  pic_layout=(FrameLayout)view.findViewById(R.id.pic_layout);
  recontent.setOnClickListener(new View.OnClickListener(){
    @Override public void onClick(    View v){
      boolean isNotLink=recontent.getSelectionStart() == -1 && recontent.getSelectionEnd() == -1;
      boolean isDeleted=msg.getRetweeted_status() == null || msg.getRetweeted_status().getUser() == null;
      if (isNotLink && !isDeleted) {
        Intent intent=new Intent(getActivity(),BrowserWeiboMsgActivity.class);
        intent.putExtra("token",GlobalContext.getInstance().getSpecialToken());
        intent.putExtra("msg",msg.getRetweeted_status());
        startActivity(intent);
      }
 else       if (isNotLink && isDeleted) {
        Toast.makeText(getActivity(),getString(R.string.cant_open_deleted_weibo),Toast.LENGTH_SHORT).show();
      }
    }
  }
);
  repost_pic_layout=(FrameLayout)view.findViewById(R.id.repost_pic_layout);
  return view;
}
