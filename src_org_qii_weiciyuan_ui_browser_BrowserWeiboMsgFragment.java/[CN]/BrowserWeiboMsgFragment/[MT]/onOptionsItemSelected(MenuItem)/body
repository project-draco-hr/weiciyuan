{
switch (item.getItemId()) {
case R.id.menu_refresh:
    if (task == null | task.getStatus() == MyAsyncTask.Status.FINISHED) {
      task=new UpdateMsgTask();
      task.execute();
    }
  break;
case R.id.menu_share:
Intent sharingIntent=new Intent(Intent.ACTION_SEND);
sharingIntent.setType("text/plain");
sharingIntent.putExtra(android.content.Intent.EXTRA_TEXT,msg.getText());
PackageManager packageManager=getActivity().getPackageManager();
List<ResolveInfo> activities=packageManager.queryIntentActivities(sharingIntent,0);
boolean isIntentSafe=activities.size() > 0;
if (isIntentSafe && mShareActionProvider != null) {
mShareActionProvider.setShareIntent(sharingIntent);
}
return true;
case R.id.menu_copy:
ClipboardManager cm=(ClipboardManager)getActivity().getSystemService(Context.CLIPBOARD_SERVICE);
cm.setPrimaryClip(ClipData.newPlainText("sinaweibo",content.getText().toString()));
break;
default :
return super.onOptionsItemSelected(item);
}
return true;
}
