{
  if (!isPullToRefreshEnabled()) {
    return false;
  }
  if (mDisableScrollingWhileRefreshing && isRefreshing()) {
    return true;
  }
  if (event.getAction() == MotionEvent.ACTION_DOWN && event.getEdgeFlags() != 0) {
    return false;
  }
switch (event.getAction()) {
case MotionEvent.ACTION_MOVE:
{
      if (mIsBeingDragged) {
        mLastMotionY=event.getY();
        pullEvent();
        return true;
      }
      break;
    }
case MotionEvent.ACTION_DOWN:
{
    if (isReadyForPull()) {
      mLastMotionY=mInitialMotionY=event.getY();
      return true;
    }
    break;
  }
case MotionEvent.ACTION_CANCEL:
case MotionEvent.ACTION_UP:
{
  if (mIsBeingDragged) {
    mIsBeingDragged=false;
    if (mState == RELEASE_TO_REFRESH) {
      if (null != mOnRefreshListener) {
        startRefresh();
        return true;
      }
 else       if (null != mOnRefreshListener2) {
        setRefreshingInternal(true);
        if (mCurrentMode == Mode.PULL_DOWN_TO_REFRESH) {
          mOnRefreshListener2.onPullDownToRefresh(this);
        }
 else         if (mCurrentMode == Mode.PULL_UP_TO_REFRESH) {
          mOnRefreshListener2.onPullUpToRefresh(this);
        }
        return true;
      }
 else {
        resetHeader();
        return true;
      }
    }
    smoothScrollTo(0);
    return true;
  }
  break;
}
}
return false;
}
