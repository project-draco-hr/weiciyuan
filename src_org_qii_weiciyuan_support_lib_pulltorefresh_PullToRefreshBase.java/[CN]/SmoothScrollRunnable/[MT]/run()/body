{
  if (mStartTime == -1) {
    mStartTime=System.currentTimeMillis();
  }
 else {
    long normalizedTime=(1000 * (System.currentTimeMillis() - mStartTime)) / mDuration;
    normalizedTime=Math.max(Math.min(normalizedTime,1000),0);
    final int deltaY=Math.round((mScrollFromY - mScrollToY) * mInterpolator.getInterpolation(normalizedTime / 1000f));
    mCurrentY=mScrollFromY - deltaY;
    setHeaderScroll(mCurrentY);
  }
  if (mContinueRunning && mScrollToY != mCurrentY) {
    if (VERSION.SDK_INT >= VERSION_CODES.JELLY_BEAN) {
      SDK16.postOnAnimation(PullToRefreshBase.this,this);
    }
 else {
      postDelayed(this,ANIMATION_DELAY);
    }
  }
}
