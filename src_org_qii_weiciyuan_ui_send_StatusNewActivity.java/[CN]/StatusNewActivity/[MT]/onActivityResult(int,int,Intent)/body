{
  super.onActivityResult(requestCode,resultCode,intent);
  if (resultCode == RESULT_OK) {
    if (TextUtils.isEmpty(content.getText().toString())) {
      content.setText(getString(R.string.share_pic));
      content.setSelection(content.getText().toString().length());
    }
    BitmapFactory.Options bmpFactoryOptions=new BitmapFactory.Options();
    bmpFactoryOptions.inSampleSize=8;
    Bitmap bmp=null;
switch (requestCode) {
case CAMERA_RESULT:
      bmp=BitmapFactory.decodeFile(imageFilePath,bmpFactoryOptions);
    pic=bmp;
  invalidateOptionsMenu();
picPath=imageFilePath;
break;
case PIC_RESULT:
Uri imageFileUri=intent.getData();
try {
bmp=BitmapFactory.decodeStream(getContentResolver().openInputStream(imageFileUri),null,bmpFactoryOptions);
}
 catch (FileNotFoundException e) {
AppLogger.e(e.getMessage());
}
pic=bmp;
invalidateOptionsMenu();
String[] proj={MediaStore.Images.Media.DATA};
Cursor cursor=managedQuery(imageFileUri,proj,null,null,null);
int column_index=cursor.getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
cursor.moveToFirst();
picPath=cursor.getString(column_index);
break;
}
}
}
