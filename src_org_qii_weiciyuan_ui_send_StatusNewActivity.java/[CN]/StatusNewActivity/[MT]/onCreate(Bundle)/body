{
  super.onCreate(savedInstanceState);
  setContentView(R.layout.statusnewactivity_layout);
  initLayout();
  Intent intent=getIntent();
  String action=intent.getAction();
  String type=intent.getType();
  if (Intent.ACTION_SEND.equals(action) && type != null) {
    if ("text/plain".equals(type)) {
      handleSendText(intent);
    }
 else     if (type.startsWith("image/")) {
      handleSendImage(intent);
    }
  }
 else {
    token=intent.getStringExtra("token");
    String accountName=intent.getStringExtra("accountName");
    String accountId=intent.getStringExtra("accountId");
    accountBean=new AccountBean();
    accountBean.setAccess_token(token);
    accountBean.setUsernick(accountName);
    accountBean.setUsername(accountName);
    accountBean.setUid(accountId);
    getActionBar().setSubtitle(accountName);
    String contentTxt=intent.getStringExtra("content");
    if (!TextUtils.isEmpty(contentTxt)) {
      content.setText(contentTxt + " ");
      content.setSelection(content.getText().toString().length());
    }
  }
  if (getEmotionsTask == null || getEmotionsTask.getStatus() == MyAsyncTask.Status.FINISHED) {
    getEmotionsTask=new GetEmotionsTask();
    getEmotionsTask.executeOnExecutor(MyAsyncTask.THREAD_POOL_EXECUTOR);
  }
}
