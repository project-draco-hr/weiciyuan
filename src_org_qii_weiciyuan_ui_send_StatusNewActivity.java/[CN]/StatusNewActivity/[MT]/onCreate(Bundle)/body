{
  super.onCreate(savedInstanceState);
  setContentView(R.layout.statusnewactivity_layout);
  initLayout();
  Intent intent=getIntent();
  String action=intent.getAction();
  String type=intent.getType();
  if (Intent.ACTION_SEND.equals(action) && type != null) {
    if ("text/plain".equals(type)) {
      handleSendText(intent);
    }
 else     if (type.startsWith("image/")) {
      handleSendImage(intent);
    }
  }
 else {
    token=intent.getStringExtra("token");
    accountBean=(AccountBean)intent.getSerializableExtra("account");
    getActionBar().setSubtitle(accountBean.getUsernick());
    String contentTxt=intent.getStringExtra("content");
    if (!TextUtils.isEmpty(contentTxt)) {
      content.setText(contentTxt + " ");
      content.setSelection(content.getText().toString().length());
    }
 else {
      SharedPreferences sharedPref=PreferenceManager.getDefaultSharedPreferences(this);
      String draft=sharedPref.getString(TYPE_DRAFT,"");
      content.setText(draft);
      content.setSelection(content.getText().toString().length());
    }
  }
  if (getEmotionsTask == null || getEmotionsTask.getStatus() == MyAsyncTask.Status.FINISHED) {
    getEmotionsTask=new GetEmotionsTask();
    getEmotionsTask.executeOnExecutor(MyAsyncTask.THREAD_POOL_EXECUTOR);
  }
}
