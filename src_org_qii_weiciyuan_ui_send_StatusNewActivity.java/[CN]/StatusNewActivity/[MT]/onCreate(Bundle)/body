{
  super.onCreate(savedInstanceState);
  setContentView(R.layout.statusnewactivity_layout);
  ActionBar actionBar=getActionBar();
  actionBar.setDisplayHomeAsUpEnabled(true);
  actionBar.setTitle(R.string.write_weibo);
  View title=getLayoutInflater().inflate(R.layout.statusnewactivity_title_layout,null);
  contentNumber=(TextView)title.findViewById(R.id.content_number);
  actionBar.setCustomView(title,new ActionBar.LayoutParams(Gravity.RIGHT));
  actionBar.setDisplayShowCustomEnabled(true);
  content=((EditText)findViewById(R.id.status_new_content));
  content.addTextChangedListener(new TextNumLimitWatcher(contentNumber,content,this));
  Intent intent=getIntent();
  String action=intent.getAction();
  String type=intent.getType();
  if (Intent.ACTION_SEND.equals(action) && type != null) {
    if ("text/plain".equals(type)) {
      handleSendText(intent);
    }
 else     if (type.startsWith("image/")) {
      handleSendImage(intent);
    }
  }
 else {
    token=intent.getStringExtra("token");
    AccountBean account=(AccountBean)intent.getSerializableExtra("account");
    getActionBar().setSubtitle(account.getUsernick());
  }
}
