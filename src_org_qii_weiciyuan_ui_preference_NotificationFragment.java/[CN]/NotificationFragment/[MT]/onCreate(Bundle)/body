{
  super.onCreate(savedInstanceState);
  addPreferencesFromResource(R.xml.notification_pref);
  getPreferenceScreen().getSharedPreferences().registerOnSharedPreferenceChangeListener(this);
  frequency=findPreference(SettingActivity.FREQUENCY);
  notification_style=findPreference(SettingActivity.JBNOTIFICATION_STYLE);
  ringtone=findPreference(SettingActivity.ENABLE_RINGTONE);
  ringtone.setOnPreferenceClickListener(new Preference.OnPreferenceClickListener(){
    @Override public boolean onPreferenceClick(    Preference preference){
      Intent intent=new Intent(RingtoneManager.ACTION_RINGTONE_PICKER);
      intent.putExtra(RingtoneManager.EXTRA_RINGTONE_TITLE,getString(R.string.ringtone));
      intent.putExtra(RingtoneManager.EXTRA_RINGTONE_SHOW_SILENT,true);
      intent.putExtra(RingtoneManager.EXTRA_RINGTONE_SHOW_DEFAULT,true);
      intent.putExtra(RingtoneManager.EXTRA_RINGTONE_TYPE,RingtoneManager.TYPE_NOTIFICATION);
      intent.putExtra(RingtoneManager.EXTRA_RINGTONE_EXISTING_URI,uri);
      intent.putExtra(RingtoneManager.EXTRA_RINGTONE_DEFAULT_URI,uri);
      startActivityForResult(intent,1);
      return true;
    }
  }
);
  SharedPreferences sharedPref=PreferenceManager.getDefaultSharedPreferences(getActivity());
  String path=sharedPref.getString(SettingActivity.ENABLE_RINGTONE,"");
  if (!TextUtils.isEmpty(path)) {
    uri=Uri.parse(path);
  }
  buildSummary();
}
