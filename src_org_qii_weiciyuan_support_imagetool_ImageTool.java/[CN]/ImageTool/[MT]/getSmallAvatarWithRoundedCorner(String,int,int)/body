{
  if (!FileManager.isExternalStorageMounted()) {
    return null;
  }
  String absoluteFilePath=FileManager.getFilePathFromUrl(url,FileLocationMethod.avatar_small);
  absoluteFilePath=absoluteFilePath + ".jpg";
  Bitmap bitmap=BitmapFactory.decodeFile(absoluteFilePath);
  if (bitmap == null && !SettingUtility.isEnablePic()) {
    return null;
  }
  if (bitmap == null) {
    boolean result=getBitmapFromNetWork(url,absoluteFilePath,null);
    if (result)     bitmap=BitmapFactory.decodeFile(absoluteFilePath);
  }
  if (bitmap != null) {
    if (bitmap.getHeight() < reqHeight || bitmap.getWidth() < reqWidth) {
      Bitmap scaledBitmap=Bitmap.createScaledBitmap(bitmap,reqWidth,reqHeight,true);
      if (scaledBitmap != bitmap) {
        bitmap.recycle();
        bitmap=scaledBitmap;
      }
      Bitmap roundedBitmap=ImageEdit.getRoundedCornerBitmap(scaledBitmap);
      if (roundedBitmap != bitmap) {
        bitmap.recycle();
        bitmap=roundedBitmap;
      }
      return bitmap;
    }
  }
  return bitmap;
}
