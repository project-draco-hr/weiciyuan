{
  final BitmapFactory.Options options=new BitmapFactory.Options();
  options.inJustDecodeBounds=true;
  BitmapFactory.decodeFile(path,options);
  final int height=options.outHeight;
  final int width=options.outWidth;
  int inSampleSize=1;
  if (height > reqHeight || width > reqWidth) {
    if (height > reqHeight && reqHeight != 0) {
      inSampleSize=(int)Math.floor((float)height / (float)reqHeight);
    }
 else     if (width > reqWidth && reqWidth != 0) {
      inSampleSize=(int)Math.floor((float)width / (float)reqWidth);
    }
  }
  options.inSampleSize=inSampleSize;
  options.inJustDecodeBounds=false;
  return BitmapFactory.decodeFile(path,options);
}
