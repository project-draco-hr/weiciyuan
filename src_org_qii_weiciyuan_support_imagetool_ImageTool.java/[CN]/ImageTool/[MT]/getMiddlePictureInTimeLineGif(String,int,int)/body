{
  int useWidth=400;
  final BitmapFactory.Options options=new BitmapFactory.Options();
  options.inJustDecodeBounds=true;
  BitmapFactory.decodeFile(absoluteFilePath,options);
  final int height=options.outHeight;
  final int width=options.outWidth;
  options.inSampleSize=calculateInSampleSize(options,useWidth,reqHeight);
  options.inJustDecodeBounds=false;
  Bitmap bitmap=BitmapFactory.decodeFile(absoluteFilePath,options);
  ByteArrayOutputStream bos=new ByteArrayOutputStream();
  bitmap.compress(Bitmap.CompressFormat.PNG,0,bos);
  byte[] bitmapdata=bos.toByteArray();
  if (height >= reqHeight && width >= useWidth) {
    try {
      BitmapRegionDecoder decoder=BitmapRegionDecoder.newInstance(bitmapdata,0,bitmapdata.length - 1,false);
      Bitmap region=decoder.decodeRegion(new Rect(10,10,useWidth - 10,reqHeight - 10),null);
      Bitmap anotherValue=ImageEdit.getRoundedCornerBitmap(region);
      bitmap.recycle();
      region.recycle();
      return anotherValue;
    }
 catch (    IOException ignored) {
    }
  }
 else   if (height < reqHeight && width >= useWidth) {
    int cutHeight=height;
    int cutWidth=(useWidth / reqHeight) * cutHeight;
    try {
      BitmapRegionDecoder decoder=BitmapRegionDecoder.newInstance(bitmapdata,0,bitmapdata.length - 1,false);
      Bitmap region=decoder.decodeRegion(new Rect(0,0,cutWidth,cutHeight),null);
      Bitmap anotherValue=ImageEdit.getRoundedCornerBitmap(region);
      bitmap.recycle();
      region.recycle();
      return anotherValue;
    }
 catch (    IOException ignored) {
    }
  }
 else   if (height >= reqHeight && width < useWidth) {
    int cutWidth=width;
    int cutHeight=(reqHeight * cutWidth) / useWidth;
    try {
      BitmapRegionDecoder decoder=BitmapRegionDecoder.newInstance(bitmapdata,0,bitmapdata.length - 1,false);
      Bitmap region=decoder.decodeRegion(new Rect(0,0,cutWidth,cutHeight),null);
      Bitmap anotherValue=ImageEdit.getRoundedCornerBitmap(region);
      bitmap.recycle();
      region.recycle();
      return anotherValue;
    }
 catch (    IOException ignored) {
    }
  }
 else   if (height < reqHeight && width < useWidth) {
    int cutWidth=0;
    int cutHeight=0;
    int betweenWidth=useWidth - width;
    int betweenHeight=reqHeight - height;
    if (betweenWidth > betweenHeight) {
      cutWidth=width;
      cutHeight=(reqHeight * cutWidth) / useWidth;
    }
 else {
      cutHeight=height;
      cutWidth=(useWidth / reqHeight) * cutHeight;
    }
    try {
      BitmapRegionDecoder decoder=BitmapRegionDecoder.newInstance(bitmapdata,0,bitmapdata.length - 1,false);
      Bitmap region=decoder.decodeRegion(new Rect(0,0,cutWidth,cutHeight),null);
      Bitmap anotherValue=ImageEdit.getRoundedCornerBitmap(region);
      bitmap.recycle();
      region.recycle();
      return anotherValue;
    }
 catch (    IOException ignored) {
    }
  }
  return null;
}
