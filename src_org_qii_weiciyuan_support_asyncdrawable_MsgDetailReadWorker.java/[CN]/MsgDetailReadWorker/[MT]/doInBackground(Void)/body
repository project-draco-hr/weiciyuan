{
  if (isCancelled()) {
    return null;
  }
  TaskCache.waitForMsgDetailPictureDownload(msg,downloadListener);
  FileLocationMethod method;
  String middlePath=FileManager.getFilePathFromUrl(msg.getBmiddle_pic(),FileLocationMethod.picture_bmiddle);
  String largePath=FileManager.getFilePathFromUrl(msg.getOriginal_pic(),FileLocationMethod.picture_large);
  String data="";
  if (new File(largePath).exists()) {
    data=msg.getOriginal_pic();
    method=FileLocationMethod.picture_large;
  }
 else   if (new File(middlePath).exists()) {
    data=msg.getBmiddle_pic();
    method=FileLocationMethod.picture_bmiddle;
  }
 else {
    data=msg.getBmiddle_pic();
    method=FileLocationMethod.picture_bmiddle;
  }
  return ImageTool.getMiddlePictureInBrowserMSGActivity(data,method,downloadListener);
}
