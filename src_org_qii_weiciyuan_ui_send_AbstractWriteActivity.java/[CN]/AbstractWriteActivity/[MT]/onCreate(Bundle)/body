{
  super.onCreate(savedInstanceState);
  setContentView(R.layout.abstractwriteactivity_layout);
  getActionBar().setDisplayShowCustomEnabled(true);
  getActionBar().setDisplayHomeAsUpEnabled(true);
  token=getIntent().getStringExtra("token");
  et=((EditText)findViewById(R.id.status_new_content));
  et.addTextChangedListener(new TextNumLimitWatcher((TextView)findViewById(R.id.menu_send),et,this));
  findViewById(R.id.menu_topic).setOnClickListener(this);
  findViewById(R.id.menu_at).setOnClickListener(this);
  findViewById(R.id.menu_add_emotions).setOnClickListener(this);
  findViewById(R.id.menu_send).setOnClickListener(this);
  if (getEmotionsTask == null || getEmotionsTask.getStatus() == MyAsyncTask.Status.FINISHED) {
    getEmotionsTask=new GetEmotionsTask();
    getEmotionsTask.executeOnExecutor(MyAsyncTask.THREAD_POOL_EXECUTOR);
  }
}
