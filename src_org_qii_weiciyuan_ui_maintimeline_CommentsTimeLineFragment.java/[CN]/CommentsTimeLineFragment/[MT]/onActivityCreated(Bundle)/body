{
  super.onActivityCreated(savedInstanceState);
  commander=((AbstractAppActivity)getActivity()).getBitmapDownloader();
  if (savedInstanceState != null && (getList() == null || getList().getItemList().size() == 0)) {
    userBean=(UserBean)savedInstanceState.getSerializable("userBean");
    accountBean=(AccountBean)savedInstanceState.getSerializable("account");
    token=savedInstanceState.getString("token");
    groupNames=savedInstanceState.getStringArray("groupNames");
    currentGroupId=savedInstanceState.getInt("currentGroupId");
    groupDataCache.put(TYPE_RECEIVED_COMMENT,(CommentListBean)savedInstanceState.getSerializable("0"));
    groupDataCache.put(TYPE_MENTIONED_COMMENT_TO_ME,(CommentListBean)savedInstanceState.getSerializable("1"));
    groupDataCache.put(TYPE_COMMENT_BY_ME,(CommentListBean)savedInstanceState.getSerializable("2"));
    clearAndReplaceValue((CommentListBean)savedInstanceState.getSerializable("bean"));
    timeLineAdapter.notifyDataSetChanged();
    refreshLayout(getList());
  }
 else {
    if (Utility.isTaskStopped(dbTask)) {
      dbTask=new DBCacheTask();
      dbTask.executeOnExecutor(MyAsyncTask.THREAD_POOL_EXECUTOR);
    }
    groupDataCache.put(TYPE_RECEIVED_COMMENT,new CommentListBean());
    groupDataCache.put(TYPE_MENTIONED_COMMENT_TO_ME,new CommentListBean());
    groupDataCache.put(TYPE_COMMENT_BY_ME,new CommentListBean());
  }
  getListView().setChoiceMode(AbsListView.CHOICE_MODE_SINGLE);
  getListView().setOnItemLongClickListener(new AdapterView.OnItemLongClickListener(){
    @Override public boolean onItemLongClick(    AdapterView<?> parent,    View view,    int position,    long id){
      if (position - 1 < getList().getSize() && position - 1 >= 0) {
        if (mActionMode != null) {
          mActionMode.finish();
          mActionMode=null;
          getListView().setItemChecked(position,true);
          timeLineAdapter.notifyDataSetChanged();
          mActionMode=getActivity().startActionMode(new CommentSingleChoiceModeListener(getListView(),timeLineAdapter,CommentsTimeLineFragment.this,getList().getItemList().get(position - 1)));
          return true;
        }
 else {
          getListView().setItemChecked(position,true);
          timeLineAdapter.notifyDataSetChanged();
          mActionMode=getActivity().startActionMode(new CommentSingleChoiceModeListener(getListView(),timeLineAdapter,CommentsTimeLineFragment.this,getList().getItemList().get(position - 1)));
          return true;
        }
      }
      return false;
    }
  }
);
}
