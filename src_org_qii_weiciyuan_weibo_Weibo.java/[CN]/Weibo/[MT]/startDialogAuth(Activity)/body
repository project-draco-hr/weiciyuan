{
  WeiboParameters params=new WeiboParameters();
  CookieSyncManager.createInstance(activity);
  dialog(activity,params,new WeiboDialogListener(){
    public void onComplete(    Bundle values){
      CookieSyncManager.getInstance().sync();
      if (null == mAccessToken) {
        mAccessToken=new Token();
      }
      mAccessToken.setToken(values.getString(TOKEN));
      mAccessToken.setExpiresIn(values.getString(EXPIRES));
      if (isSessionValid()) {
        Log.d("Weibo-authorize","Login Success! access_token=" + mAccessToken.getToken() + " expires="+ mAccessToken.getExpiresIn());
        mAuthDialogListener.onComplete(values);
      }
 else {
        Log.d("Weibo-authorize","Failed to receive access token");
        mAuthDialogListener.onWeiboException(new WeiboException("Failed to receive access token."));
      }
    }
    public void onError(    DialogError error){
      Log.d("Weibo-authorize","Login failed: " + error);
      mAuthDialogListener.onError(error);
    }
    public void onWeiboException(    WeiboException error){
      Log.d("Weibo-authorize","Login failed: " + error);
      mAuthDialogListener.onWeiboException(error);
    }
    public void onCancel(){
      Log.d("Weibo-authorize","Login canceled");
      mAuthDialogListener.onCancel();
    }
  }
);
}
