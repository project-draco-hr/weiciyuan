{
  int now=0;
  try {
    EmotionsDao dao=new EmotionsDao(token);
    List<EmotionBean> list=dao.getEmotions();
    size=list.size();
    DatabaseManager.getInstance().addEmotions(list);
    GlobalContext.getInstance().setEmotions(DatabaseManager.getInstance().getEmotionsMap());
    for (    EmotionBean bean : list) {
      String url=bean.getUrl();
      String path=FileManager.getFileAbsolutePathFromUrl(url,FileLocationMethod.emotion);
      HttpUtility.getInstance().executeDownloadTask(url,path,null);
      now++;
      publishProgress(now);
    }
  }
 catch (  WeiboException e) {
    this.e=e;
    cancel(true);
  }
  return null;
}
