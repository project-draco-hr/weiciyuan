{
  if (savedInstanceState != null) {
    group=(HashMap<Integer,String>)savedInstanceState.getSerializable("group");
    selected=savedInstanceState.getInt("selected");
  }
  Set<Integer> keys=group.keySet();
  final Integer[] keyArray=keys.toArray(new Integer[keys.size()]);
  int position=0;
  for (int i=0; i < keyArray.length; i++) {
    if (keyArray[i] == selected)     position=i;
  }
  String[] valueArray=new String[keyArray.length];
  for (int i=0; i < keyArray.length; i++) {
    valueArray[i]=group.get(keyArray[i]);
  }
  AlertDialog.Builder builder=new AlertDialog.Builder(getActivity());
  builder.setTitle(getString(R.string.select_group));
  builder.setSingleChoiceItems(valueArray,position,new DialogInterface.OnClickListener(){
    @Override public void onClick(    DialogInterface dialog,    int which){
      FriendsTimeLineFragment fragment=(FriendsTimeLineFragment)getTargetFragment();
      int selectedItemId=keyArray[which].intValue();
      if (selected != selectedItemId) {
        fragment.setSelected(selectedItemId);
        fragment.refreshAnother();
      }
      dismiss();
    }
  }
);
  return builder.create();
}
